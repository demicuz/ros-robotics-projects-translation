# 4.11. Соединение плат Tiva C с ROS с помощью Energia

Интерфейс Tiva C Launchpad в ROS очень похож на Arduino. IDEA, в которой мы программируем платы Tiva C, таких как EK-TM4C123GXL и EK-TM4C1294XL, является Energia \([http://energia.nu/](http://energia.nu/)\). "Energia" - это модифицированная версия Arduino IDE. Процедура создания клиентской библиотеки ROS такая же, как и в Arduino. Нужно установить несколько пакетов на Ubuntu, прежде чем мы начнем работать с клиентом Energia ROS.

Следующая команда установит клиентскую библиотеку ROS для IDE Energia:

```text
$ sudo apt-get install ros-kinetic-rosserial-tivac
```

Следующая команда установит библиотеки C для платформы i386. Эта библиотека требуется, если вы запускаете Energia на 64-битном Ubuntu.

```text
$ sudo dpkg --add-architecture i386
$ sudo apt-get update
$ sudo apt-get install libc6:i386
```

После установки этих пакетов вы можете скачать и извлечь IDE Energia. Загрузите последнюю версию Energia с сайта [http://energia.nu/download/](http://energia.nu/download/). мы используем Eneriga-018. Вы получите такую IDE, которая очень похожа на Arduino IDE, за исключением цвета:

![](../.gitbook/assets/image%20%2819%29.png)

Создание библиотеки ROS для Energia - это то же самое, что и для Arduino:

1.Зайдите в File \| Preferences и установите расположение Sketchbook

2. Создайте папку `libraries`, если она не существует в этом расположении, и запустите следующую команду, чтобы создать ros\_lib:

```text
$ rosrun rosserial_tivac make_libraries_energia
```

3. Если все сработало:

![](../.gitbook/assets/image%20%2825%29.png)

Сначала мы можем попробовать пример `rgb`. Плата Tiva C имеет трехцветный светодиод. Используя этот код, мы можем публиковать значения RGB в теме, и плата будет включать и выключать светодиод в соответствии со значениями темы. Мы можем ввести значения 0 или 1 для каждого из них. Если значение равно 0, то этот светодиод будет выключен, а если равно 1, то он будет иметь максимальную яркость.

Мы можем скомпилировать код, загрузить его на нужную плату и запустить сервер ROS используя следующий набор команд.

Запускаем `roscore`:

```text
$ roscore
```

Запускаем сервер:

```text
$ rosrun rosserial_python serial_node.py /dev/ttyACM0
```

Мы получим тему под названием `/led`, когда запустим сервер ROS, и сможем опубликовать ее значения для темы с помощью следующей команды:

```text
$ rostopic pub led std_msgs/ColorRGBA "r: 0.0 g: 0.0 b: 1.0 a: 1.0"
```

